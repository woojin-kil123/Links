<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
*{
	font-family: ns-r;
	 margin: 0;
    padding: 0;
    box-sizing: border-box;
	}
	body {
    background-color: #f9f9f9;
}
.mypage-container {
    width: 800px;
    margin: 50px auto;
    padding: 20px;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}
.page-title {
    text-align: center;
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 20px;
    color: #333;
}
.member {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px;
    padding-left: 60px;
    background: #f4f4f7;
    border-radius: 8px;
}
.information {
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    padding-left: 100px;
}

.change:hover {
    color: #333;
}
.comment-wrap {
    display: flex;
    margin-top: 20px;
}

.comment {
    border-right: 2px solid white;
    
}
.comment:hover, .score:hover, .movie:hover {
    background: #ddd;
}

	.tbl{
	width: 600px;
	box-sizing: border-box;
	
	}
	.tbl th{
	box-sizing: border-box;
	text-align: center;
	background-color: #ffc800;
	color: #ffffff;
	}
	.tbl td{
	text-align: center;
	border-top: none;
	border-right: none;
	}
	input{
	border:none;
	text-align: center;
	}
	.btn-primary{
		width: 100px;
		height: 50px;
		border-radius:10px;
	}
	.btn-secondary{
		width: 100px;
		height: 50px;
		border-radius:10px;	
	}
	.change-btn{
		display: flex;
		justify-content: center;
		gap:50px;
		padding: 30px 0px;
	}

	.my-info-wrap{
		margin-top: 50px;
	}
	.btn-primary {
    background-color: #000; 
    color: #ffc800;
    font-weight: bold;
    transition: all 0.3s ease-in-out;
    border: none;
    cursor: pointer;
}

.btn-primary:hover {
    background-color: #ffc800;
    color: #000;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

.btn-secondary {
    background-color: #333;
    color: white;
    font-weight: bold;
    transition: all 0.3s ease-in-out;
    border: none;
    cursor: pointer;
}

.btn-secondary:hover {
    background-color: #ffc800;
    color: #000;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}
.mypage-container {
    width: 800px;
    margin: 50px auto;
    padding: 30px;
    background: #fff;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}
.page-title {
    font-size: 32px;
    font-weight: bold;
    color: #000;
    text-transform: uppercase;
    text-align: center;
    padding-bottom: 15px;
    border-bottom: 4px solid #ffc800;
}
.member {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 25px;
    border-radius: 12px;
    color: #000;
    box-shadow: 2px 4px 10px rgba(0, 0, 0, 0.15);
    transition: transform 0.2s;
}
.member:hover {
    transform: scale(1.02);
     background: #ddd;
}
.comment-wrap {
    display: flex;
    justify-content: center;
    gap: 20px;
}
.comment, .score, .refer {
    flex: 1;
    text-align: center;
    padding: 20px;
    font-size: 18px;
    font-weight: bold;
    background: #f4f4f7;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
}
.comment:hover, .score:hover, .refer:hover {
    background: #ddd;
    transform: scale(1.05);
}
input {
    padding: 10px;
    transition: all 0.3s ease-in-out;
    font-size: 16px;
}

input:focus {
    border-color: #ffc800;
    box-shadow: 0 0 8px rgba(255, 200, 0, 0.5);
    outline: none;
}
.btn-primary:hover {
    background-color: #ffc800;
    color: #000;
    box-shadow: 0 5px 15px rgba(255, 200, 0, 0.5);
}
.btn-secondary:hover {
    background-color: #ffc800;
    color: #000;
    box-shadow: 0 5px 15px rgba(255, 200, 0, 0.5);
}

.change-btn {
    display: flex;
    justify-content: center;
    gap: 20px;
    padding: 30px 0;
}
.name-wrap{
display: flex;
}
.id-wrap{
display: flex;
}
.name{
margin-left: 10px;
}
.id{
margin-left: 10px;
}
label{
	font-size: 18px;
}
  .lg{
    height: 35px;
    }
  .input-item{
  position: relative;
  }
  .show{
  position: absolute ;
  top: 8px;
	right:10px;
  }
.mem-loc{
	margin: 0 auto;
	padding:  0 auto;
}
.tbl{
	margin: 0 auto;
	margin-top:20px;
	padding:  0 auto;
}
</style>
</head>
<body>
	<th:block th:include="common/header"></th:block>
	<script src="/js/sweetalert.min.js"></script>
	<main class="content mypage-container">
		<section class="page-section" style="padding-top:40px; padding-bottom:80px;">
			<div class="main">
			<div class="page-title">마이페이지</div>
			</div>
			<div class="member">
			<div class="information">
			<div class="name-wrap">
			<div >이름:</div>
			<div class="name" th:text="${session.member.memberName}"></div>
			</div>
			<div class="id-wrap">
			<div>아이디:</div>
			<div  class="id"th:text="${session.member.memberId}"></div>
			</div>
			</div>
			
			</div>
			<div class="comment-wrap">
				<div class="comment">
					<a style="text-decoration: none;" th:href="@{/comment/myCommentList(memberId=${session.member.memberId})}">
						<div class="commNo" style="color:black"></div>
						<div class="comm" style="color:black">코멘트</div>
					</a>	
				</div>
				<div class="score">
					<a style="text-decoration: none;" th:href="@{/contents/myContents(memberId=${session.member.memberId})}">
						<div class="starNo"  style="color:black"></div>
						<div class="star"  style="color:black">찜 목록</div>
					</a>	
			
			</div>
			</div>
		<div class="my-info-wrap">
			<form action="/member/update"  class="form-control mem-loc" method="post">
				<table class="tbl">
					<tr>
						<th>
							<label for="memberPw">비밀번호</label>
						</th>
						<td>
							<div class="input-item">
								<input type="password"  class="form-control pw" name="memberPw" id="memberPw"  th:value="${session.member.memberPw}" >
								<span class="material-icons show" id="togglePw">visibility_off</span>
							</div>
						</td>
					</tr>
					<tr>
						<th>
							<label for="memberPhone">전화번호</label>
						</th>
						<td>
							<div class="input-item">
								<input type="text"  class="form-control" name="memberPhone" id="memberPhone"  th:value="${session.member.memberPhone}">
							</div>
						</td>
					</tr>
					<tr>
						<th>
							<label for="memberPw">이메일</label>
						</th>
						<td>
							<div class="input-item">
								<input type="text"  class="form-control" name="memberEmail" id="memberEmail"  th:value="${session.member.memberEmail}">
							</div>
						</td>
					</tr>
				</table>
				<div class="change-btn">
					<button type="submit" class="btn-primary">정보수정</button>
					<button type="button" class="btn-secondary del-btn">회원탈퇴</button>
				</div>
				</form>
			</div>
		</section>
		</main>
	<script>
	$(".del-btn").on("click", function(){
		swal({
			title: "회원탈퇴",
			text:" 회원탈최 하시겠습니까",
			icon: "warning",
			buttons :{
				cancel:{
					text:"취소",
					value:false,
					visible : true,
					className: "btn-primary",
					closeModal : true
				},
				confirm:{
					text:"탈퇴하기",
					value:true,
					visible : true,
					className: "btn-secondary",
					closeModal : true
				}
			}
		}).then(function(isConfirm){
			if(isConfirm){
				location.href ="/member/delete";
			}
		});
	});
	
	//$(".comm").on("click",function(){
		//location.href="/comment/myCommentList?memberId="+session.member.memberId;
	//}); 
	
	$("#togglePw").on("click",function(){
		let pwInput = document.getElementById("memberPw");
        let icon = this;
        if (pwInput.type === "password") {
            pwInput.type = "text";
            icon.textContent = "visibility"; // 아이콘 변경
        } else {
            pwInput.type = "password";
            icon.textContent = "visibility_off"; // 아이콘 변경
        }
    });
		
	
	$.ajax({
		url:"/member/ajaxcommNo",
		type :"get",
		success: function(result){
				$(".commNo").text(result);	
		},
		error: function(){
		}
	});
	$.ajax({
		url:"/member/ajaxscoreNo",
		type :"get",
		success: function(result){
				$(".starNo").text(result);	
		},
		error: function(){
		}
	});
	
	</script>
	<th:block th:include="common/footer"></th:block>
</body>
</html>